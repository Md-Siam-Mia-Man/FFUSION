<!DOCTYPE html>
<html>

<head>
     <meta charset="UTF-8">
     <title>FFusion</title>
     <meta http-equiv="Content-Security-Policy"
          content="script-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com; media-src 'self' file:;">
     <link rel="preconnect" href="https://fonts.googleapis.com">
     <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
     <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
     <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
     <link rel="stylesheet" href="../css/style.css">
</head>

<body data-theme="light">
     <div class="title-bar">
          <div class="title-text"><i class="fa-solid fa-atom"></i> FFusion</div>
          <div class="title-controls"><button id="theme-toggle-btn" class="nav-item"><i
                         class="fa-solid fa-circle-half-stroke"></i></button></div>
     </div>

     <div class="app-container">
          <nav class="sidebar">
               <button data-page="page-dashboard" class="nav-item active" title="Dashboard"><i
                         class="fa-solid fa-table-columns"></i></button>
               <button data-page="page-stitch" class="nav-item" title="Stitch Videos"><i
                         class="fa-solid fa-link"></i></button>
               <button data-page="page-convert" class="nav-item" title="Convert & Process"><i
                         class="fa-solid fa-gear"></i></button>
               <button data-page="page-extract" class="nav-item" title="Extract Frames"><i
                         class="fa-solid fa-images"></i></button>
               <button data-page="page-trim" class="nav-item" title="Trim & Cut"><i
                         class="fa-solid fa-scissors"></i></button>
               <button data-page="page-audio" class="nav-item" title="Audio Tools"><i
                         class="fa-solid fa-waveform"></i></button>
          </nav>

          <main class="main-content">
               <div id="page-dashboard" class="page active">
                    <div class="page-header">
                         <h1>Dashboard</h1>
                         <div id="dashboard-header-controls" class="header-controls hidden">
                              <button class="button button-danger" id="clear-file-btn">Clear File</button>
                              <button class="button" id="browse-file-dashboard">Select Another</button>
                         </div>
                    </div>
                    <div class="page-content">
                         <div id="dashboard-welcome" class="drop-zone-container">
                              <div class="drop-zone">
                                   <i class="fa-solid fa-file-arrow-down"></i>
                                   <p>Drop a media file to begin</p>
                                   <span>or</span>
                                   <button class="button">Browse File</button>
                              </div>
                         </div>
                         <div id="dashboard-content" class="dashboard-layout hidden">
                              <div class="dashboard-main">
                                   <div id="dashboard-preview-container"></div>
                                   <div id="dashboard-actions-container"></div>
                              </div>
                              <div id="dashboard-inspector" class="dashboard-inspector"></div>
                         </div>
                    </div>
               </div>

               <div id="page-stitch" class="page">
                    <div class="page-header">
                         <h1>Stitch Videos</h1>
                    </div>
                    <div class="page-content stitch-layout">
                         <div id="stitch-file-list"></div>
                         <div class="stitch-controls">
                              <p>Add two or more videos with the same resolution and codecs for the best results. Drag
                                   and drop to reorder.</p>
                              <button class="button" id="stitch-add-videos-btn"><i class="fa-solid fa-plus"></i> Add
                                   Videos</button>
                              <button class="button-cta" id="stitch-start-btn" disabled><i class="fa-solid fa-link"></i>
                                   Start Stitching</button>
                         </div>
                    </div>
               </div>

               <div id="page-convert" class="page">
                    <div class="page-header">
                         <h1>Convert & Process</h1>
                    </div>
                    <div class="page-content convert-grid">
                         <div class="convert-settings">
                              <div class="source-selector">
                                   <p>Source: <span id="convert-source-file">None</span></p>
                                   <button class="button" id="browse-file-convert">Select File</button>
                              </div>
                              <div class="tabs">
                                   <button data-tab="video" class="tab-item active"><i class="fa-solid fa-video"></i>
                                        Video</button>
                                   <button data-tab="audio" class="tab-item"><i class="fa-solid fa-music"></i>
                                        Audio</button>
                                   <button data-tab="output" class="tab-item"><i class="fa-solid fa-file-export"></i>
                                        Output</button>
                              </div>
                              <div class="tab-content-container">
                                   <div id="tab-video" class="tab-content active">
                                        <div class="form-control"><label>Codec</label>
                                             <div class="button-group" id="video-codec" data-value="libx264">
                                                  <button class="button-group-item active"
                                                       data-value="libx264">H.264</button>
                                                  <button class="button-group-item" data-value="libx265">H.265</button>
                                                  <button class="button-group-item" data-value="copy">Copy</button>
                                             </div>
                                        </div>
                                        <div class="form-control video-options"><label>Quality (CRF)</label>
                                             <div class="slider-container" id="video-crf-slider" data-min="0"
                                                  data-max="51" data-value="23">
                                                  <div class="slider-track">
                                                       <div class="slider-progress"></div>
                                                       <div class="slider-thumb"></div>
                                                  </div>
                                                  <span class="slider-value">23</span>
                                             </div>
                                        </div>
                                   </div>
                                   <div id="tab-audio" class="tab-content">
                                        <div class="form-control"><label>Action</label>
                                             <div class="button-group" id="audio-action" data-value="convert">
                                                  <button class="button-group-item active"
                                                       data-value="convert">Convert</button>
                                                  <button class="button-group-item" data-value="copy">Copy</button>
                                                  <button class="button-group-item" data-value="remove">Remove</button>
                                             </div>
                                        </div>
                                        <div class="audio-options">
                                             <div class="form-control"><label>Codec</label>
                                                  <div class="button-group" id="audio-codec" data-value="aac">
                                                       <button class="button-group-item active"
                                                            data-value="aac">AAC</button>
                                                       <button class="button-group-item"
                                                            data-value="libmp3lame">MP3</button>
                                                  </div>
                                             </div>
                                             <div class="form-control"><label>Bitrate (kbps)</label>
                                                  <div class="button-group" id="audio-bitrate" data-value="192">
                                                       <button class="button-group-item" data-value="320">320</button>
                                                       <button class="button-group-item active"
                                                            data-value="192">192</button>
                                                       <button class="button-group-item" data-value="128">128</button>
                                                  </div>
                                             </div>
                                        </div>
                                   </div>
                                   <div id="tab-output" class="tab-content">
                                        <div class="form-control"><label>Container</label>
                                             <div class="button-group" id="output-container" data-value="mp4">
                                                  <button class="button-group-item active" data-value="mp4">MP4</button>
                                                  <button class="button-group-item" data-value="mkv">MKV</button>
                                                  <button class="button-group-item" data-value="mov">MOV</button>
                                             </div>
                                        </div>
                                   </div>
                              </div>
                              <button class="button-cta" id="add-to-queue-btn" disabled>Add to Queue</button>
                         </div>
                         <div class="convert-queue">
                              <h3><i class="fa-solid fa-list-check"></i> Processing Queue</h3>
                              <div id="job-queue-list"></div>
                         </div>
                    </div>
               </div>

               <div id="page-extract" class="page">
                    <div class="page-header">
                         <h1>Extract Frames</h1>
                    </div>
                    <div class="page-content">
                         <!-- Content remains largely the same, handled by JS -->
                    </div>
               </div>

               <div id="page-trim" class="page">
                    <div class="page-header">
                         <h1>Trim & Cut</h1>
                    </div>
                    <div class="page-content">
                         <div class="source-selector">
                              <p>Source: <span id="trim-source-file">None</span></p><button class="button"
                                   id="browse-file-trim">Select Video</button>
                         </div>
                         <div class="trim-layout">
                              <div class="trim-preview-panel">
                                   <video id="trim-video-player"></video>
                                   <div class="trim-controls">
                                        <div class="playback-controls">
                                             <i id="trim-play-btn" class="fa-solid fa-play"></i>
                                             <span id="trim-current-time" class="time-display">00:00:00</span>
                                             <div class="timeline-container">
                                                  <div class="timeline-track-bg">
                                                       <div class="timeline-track-selection"></div>
                                                  </div>
                                                  <div class="timeline-playhead"></div>
                                                  <div class="timeline-handle" id="trim-handle-start"></div>
                                                  <div class="timeline-handle" id="trim-handle-end"></div>
                                             </div>
                                             <span id="trim-duration" class="time-display">00:00:00</span>
                                        </div>
                                   </div>
                              </div>
                              <div class="trim-settings-panel">
                                   <div class="trim-time-inputs">
                                        <div class="form-control">
                                             <label>Start Time</label>
                                             <input type="text" id="trim-start-time" value="00:00:00.000">
                                        </div>
                                        <div class="form-control">
                                             <label>End Time</label>
                                             <input type="text" id="trim-end-time" value="00:00:00.000">
                                        </div>
                                   </div>
                                   <div class="tool-card-simple">
                                        <h3><i class="fa-solid fa-wand-magic-sparkles"></i> Create GIF</h3>
                                        <div class="form-control"><label>Width (px)</label><input type="number"
                                                  id="gif-width" value="480"></div>
                                        <div class="form-control"><label>Frame Rate</label><input type="number"
                                                  id="gif-fps" value="12"></div>
                                   </div>
                                   <div class="trim-actions">
                                        <button class="button" id="create-gif-btn" disabled><i
                                                  class="fa-solid fa-gift"></i> Create GIF from Selection</button>
                                        <button class="button-cta" id="trim-start-btn" disabled><i
                                                  class="fa-solid fa-scissors"></i> Trim Video (Lossless)</button>
                                   </div>
                              </div>
                         </div>
                    </div>
               </div>

               <div id="page-audio" class="page">
                    <div class="page-header">
                         <h1>Audio Tools</h1>
                    </div>
                    <div class="page-content">
                         <div class="source-selector">
                              <p>Source: <span id="audio-source-file">None</span></p>
                              <button class="button" id="browse-file-audio">Select File</button>
                         </div>
                         <div class="tool-card-simple">
                              <h3><i class="fa-solid fa-file-audio"></i> Extract Audio</h3>
                              <p>Extract the audio track from a video file without re-encoding (lossless).</p>
                              <button class="button-cta" id="extract-audio-btn" disabled>Extract Audio</button>
                         </div>
                    </div>
               </div>
          </main>
     </div>

     <footer class="status-bar">
          <div id="status-text">Ready</div>
          <div id="status-progress-bar" style="width: 0%;"></div>
     </footer>
     <script src="./renderer.js"></script>
</body>

</html>